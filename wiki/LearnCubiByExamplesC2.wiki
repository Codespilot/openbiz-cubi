#summary Learn Cubi By Examples Chapter 2 - Implementation Phase 1

= Learn Cubi By Examples Chapter 2 - Implementation Phase 1 =

At the end of previous chapter, we have database schema ready. This chapter will start the initial implementation. We call it phase 1, the prototyping phase.

== Write Trac Module ==
In Cubi, an application can be one or more Cubi modules. To make it simple to manage, we put all Trac application into 'trac' module.

=== Module Directories ===
With a module, you can choose a directories the way you want. Typically, each business component may have its own sub-directory. In trac module, we have the following sub-directories for business components as
{{{
modules
- trac
-- attach (ticket attachment)
-- comments (ticket comments)
-- component
-- enum (enumerations)
-- milestone
-- product
-- ticket
-- version
}}}

Other sub-directories are typical Cubi module folders:
{{{
modules
- trac
-- message (contains module message files)
-- resource (contains module resource files)
-- view (contains module View files, view is same as page)
-- websvc (contains module public web service files)
-- do (contains module Data Object files. trac doesn't have this)
-- form (contains module Form files. trac doesn't have this)
}}}

=== Generate Metadata ===
A Cubi module can be created manually or with a command line tool called “gen_meta”. In this chapter, we will use gen_meta tool which is a command line metadata and module generator. This tool guide user to create a new module in steps. It accomplishes the all manual editing in one shot.

First, launch a console - a DOS window or a Linux/Unix console. Let's assume Cubi is installed under /cubi/ folder. Change director to /cubi/bin/tools/. Then type in the following command. 
{{{
# php gen_meta.php Default trac_ticket trac
}}}
Where “Default” is the first database name defined in /cubi/application.xml, “trac_ticket” is the table name, “trac” is the module name. 

Following the steps prompted by “gen_meta”, always press “enter” to make choice suggested by the tool.