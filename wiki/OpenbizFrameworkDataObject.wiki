#summary describe Openbiz Data Object

= Openbiz Data Object =

Openbiz maps database tables to data object (DO) with BizDataObj class. Each DO declares a table name and mapping between table columns to DO fields. The following chart shows the simplest DO which maps to one table.

https://openbiz-cubi.googlecode.com/svn/trunk/docs/img/ob/do_mapping.png

== DO Metadata ==

Openbiz DO has a core class “BizDataObj”. This class metadata is described below.
{{{
<BizDataObj ...>
    <BizFieldList>
        <BizField ...> *
    <TableJoins>
        <Join ...> *
    <ObjReferences>
        <Object ...> *
}}}

=== BizDataObj Element ===

BizDataObj element is the root element of a DO metadata. It has 3 children elements - BizFieldList, TableJoins and ObjReferences. BizDataObj element has the following attributes:

==== Name ====
Name is the identifier of a DO object. Name should be same as the DO file name.

==== Description ====
Description describes the functions and behavior of the DO.

==== Class ====
Class specifies the name of its implementation class.

==== !DBName ====
!DBName is the Database Name defined in application Config.xml

==== Table ====
Table is a database table name which maps to the DO. We also call the “Table” in the BizDataObj element as “base table” of the DO.

==== !IDGeneration ====
!IDGeneration specifies generation algorithm of the primary key of the base table. The value can be "Openbiz”, “Identity”, “Sequence:seqname”, “GUID”, “UUID”, and other.

==== !SearchRule ====
!SearchRule applies search criteria to fetch the data from the data source (database tables).
Example: !SearchRule="[start_time]>'1999-10-20'”

==== !SortRule ====
!SortRule applies sort criteria to fetch the data from the data source (database tables).
Example: !SortRule="[start_time] ASC"

==== !OtherSQLRule ====
!OtherSQLRule applies user specified SQL expression to fetch the data from the data source (database tables).
Example: !OtherSQLRule = "GROUP BY [position] HAVING [age]>30"

==== !AccessRule ====
!AccessRule gives additional search criteria to limit the data according  to the access control.
Example: !AccessRule="[owner_id]='{@profile:Id}'"

==== !CreateCondition ====
!CreateCondition sets the access control (ACL) for creating record.
Example: !CreateCondition=“project.create”. Here “project” is the resource name and “create” is the action name. They are defined in the ACL section of the Cubi module xml file.

==== !UpdateCondition ====
!UpdateCondition sets the access control (ACL) for updating record.
Example: !UpdateCondition=“project.update”

==== !DeleteCondition ====
!DeleteCondition sets the access control (ACL) for deleting record.
Example: !DeleteCondition=“project.delete”

==== Uniqueness ====
Uniqueness sets the validation condition that checks if values of certain fields are unique.
Syntax: Uniquess = "fld1,fld2;fld3,fld4;...."
Openbiz will check the uniqueness of (fld1,fld2) and (fld3,fld4). Exception will be thrown if check fails.

==== !MessageFile ====
!MessageFile specifies the file path that provides message strings for the form. Message strings are used in the class source code for displaying messages like error, alert and log message.

==== !CacheLifetime ====
!CacheLifetime sets the DO cache life time in seconds. If !CacheLifetime is larger than 0, DO query results are cached for the length given by the value. By default the cache is turned off.